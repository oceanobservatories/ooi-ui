{% extends "common/base.html" %}

{% block title %}
    <title>Basic</title>
{% endblock %}

{% block head %}
  <link rel="stylesheet" href="/css/compiled/alertPage.css" type="text/css" />
  <!-- Partials -->
  
  <script src="/js/partials/compiled/alertPage.js" type="text/javascript"></script>
  <script src="/js/compiled/alertPage.js" type="text/javascript"></script>

{% endblock %}

{% block body %}
<div id="wrapper">
  <!-- Sidebar -->
  <div id="sidebar-wrapper" class="navbar-default">
  </div>
   
   <div id="page-content-wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12">
          <div class="panel">
            <div class="panel-heading">
              <h2> Alert Page</h2>
            <div class="panel-body">
            <!-- panel-body -->
             <form class="form-vertical" role="form">
             <div class="form-group">
                  <label for="Array" class="col-sm-3 control-label">Array</label>
                  <div class="col-sm-3">
                   <select class="form-control" id="array" name="array">
                   </select>
                  <span class="help-block hidden"></span>
                  </div>
             </div>

             <div class="form-group">
                  <label for="Platform" class="col-sm-3 control-label">Platform</label>
                   <div class="col-sm-3">
                   <select class="form-control" id="Platform" name="Platform">
                      <option>Glider</option>
                      <option>All</option>
                      <option>Surface Buoy</option>
                      <option >Mooring</option>
                      <option>Node</option>
                      <option>Riser</option>
                      <option>Profiler</option>
                      <option>AUV</option>
                    </select>
                  <span class="help-block hidden"></span>
                  </div>
             </div>          

             <div class="form-group">
                  <label for="assetReport" class="col-sm-3 control-label">Instrument</label>
                  <div class="col-sm-3">
                   <select class="form-control" id="Instrument" name="Instrument">
                      <option>Glider</option>
                      <option>Surface Buoy</option>
                      <option>Mooring</option>
                      <option>Node</option>
                      <option>Riser</option>
                      <option>Profiler</option>
                      <option>AUV</option>
                    </select>
                  <span class="help-block hidden"></span>
                  </div>
              </div>

        <hr width ='80%'>
        <div class="row col-sm-12">
          <div class="col-sm-4"> Conditions
          <div id="Conditions">
              
          </div>
           <div class="form-group">
                   <select class="form-control" id="ConditionsFilter" name="ConditionsFilter">
                    </select>
                   <span class="help-block hidden"></span>
           </div>   

           <div class="form-group">        
                <button id="conditionsReset" class="btn btn-success"> Reset Filter</button>
               <span class="help-block hidden"></span>
           </div>

        </div>
        <div class="col-sm-3">Input
        <div id='ConditionsInput'name="ConditionsInput">
        </div>
       
        </div>
        <div class="col-sm-1">
          Remove 
        <div id='RemoveConditions'> </div>          
       
        </div>
            
        <div class="col-sm-3">Users
          <div id="Users"></div>
          <div class="form-group">         
                    <select class="form-control" id="UserFilter" name="UserFilter">
                    </select>
                 <span class="help-block hidden"></span>
          </div>
          <div class="form-group">
          <button class="btn btn-success" id="userReset"> Reset Filter</button>
          <span class="help-block hidden"></span>
          </div>
         </div>
         <div class="col-sm-1"> Remove
         <div id="RemoveUser"></div>
         </div>

        <hr width ='80%'>
        <div>Additional Information</div>
        <div class="row col-sm-12">

        <div class="col-sm-12">
        <div class="form-group">
                  <label for="Name" class="col-sm-3 control-label">Name</label>
                  <div class="col-sm-9">
                    <input type="text" class="form-control" id="Name" name="Name" />
                    <span class="help-block hidden"></span>
                  </div>
                </div>
        </div>

        <div class="col-sm-12">
        <div class="form-group">
               <label for="lastname" class="col-sm-3 control-label">Priority</label>
               <div class="col-sm-9">
                    <select class="form-control" id="Priority" name="Priority">
                      <option>Low</option>
                      <option>Normal</option>
                      <option>High</option>
                      <option>Urgent</option>
                      <option>Immediate</option>
                    </select>
                 <span class="help-block hidden"></span>
             </div>
          </div>
        </div>
        <div class="col-sm-12">
        <div class="form-group">
                  <label for="lastname" class="col-sm-3 control-label">Description</label>
                  <div class="col-sm-9">
                    <textarea type="text" class="form-control" id="Description" name="Description" /></textarea>
                   <span class="help-block hidden"></span>
        </div>
        </div>
        </div>
        </div>

        <hr width='80%'>
        <div>Contact Information</div>
        <div class="row col-sm-12">

        <div class="form-group">
         <div class="checkbox">
            <label class="col-sm-2">
             Check to receive notifications  
            </label>
          </div>
        </div>
          
        <div class="form-group">
         <div class="checkbox">
            <label class="col-sm-2">
              <input type="checkbox"id="Email" name="Email"> Email    
            </label>
          </div>
        </div>

        <div class="form-group">
           <div class="checkbox">
            <label class="col-sm-2">
              <input type="checkbox"id="Redmine" name="Redmine"> Redmine
            </label>
          </div>
        </div>
        <div class="form-group">
           <div class="checkbox">
            <label class="col-sm-2">
              <input type="checkbox"id="PhoneCall" name="PhoneCall"> Phone Call
            </label>
          </div>
        </div>
        <div class="form-group">
           <div class="checkbox">
            <label class="col-sm-2">
              <input type="checkbox" id="TextMessage" name="TextMessage"> Text Message
            </label>
          </div>
        </div>
        <div class="form-group">
           <div class="checkbox">
            <label class="col-sm-2">
              <input type="checkbox" id="LogEvent" name="LogEvent"> LogEvent
            </label>
          </div>
        </div>
        </div>

        <div class="form-group">
          <div align="center"> 
                  <button type="button" id="saveAlert" class="btn btn-success">Save Alert</button>
                  <button type="button" id="resetButton" class="btn btn-success">Cancel</button>
          </div>
         </div>   
        </form>
        </div> <!-- panel -->
        </div> <!-- col-lg-12 -->
        </div> <!-- row -->
      </div>
    </div>
  </div>
</div>

  <!-- /#wrapper -->

<!-- Menu Toggle Script -->
<script type="text/javascript">

_.extend(OOI.prototype, Backbone.Events, {
  login: new LoginModel(),
  models: {
    mapModel: new MapModel(),
    alertModel: new AlertModel()
  
  },
  collections: {
    arrays: new ArrayCollection(),
    platform_deployments: new PlatformDeploymentCollection(),
    alertCollection: new AlertCollection(),
    assetTen: new AssetTen(),
    trouble: new TroubleTicketDropdownCollection() 
  },
  views: {

  },
  start: function() {
    var self = this;

    // Need to use  var complete for collections, used in signup page
    //this.initEvents();
    //this.login.fetch({async:false});
    //var complete = _.invoke([this.collections.roles, this.collections.orgs], 'fetch');
    //$.when.apply($, complete).then(function() {
     // console.log("DONE");
     // self.initViews();
     // self.trigger('ooi:sync');
    //}, function() {
     // self.initViews();
    //});
 // }

    this.login.fetch({async: false}); // Doesn't actually make an ajax request

    //--------------------------------------------------------------------------------
    // Views
    //--------------------------------------------------------------------------------
    this.views.navbar = new NavbarView();
    $('body').prepend(this.views.navbar.el);

       // It allows me access(via ooi{}) models, collections or views inside one another  
    // e.g. I call ooi.mapModel inside the TocView and MapView to access the change in attributes
    this.views.tocView = new TOCView({
      collection: this.collections.arrays
    });
    $('#sidebar-wrapper').html(this.views.tocView.el);
    
    
    this.views.alertFilterView = new AlertFilterView({
        el: 'form',
        model: this.models.alertModel,
        collection: this.collections.alertCollection
        
        
    });
    
       //--------------------------------------------------------------------------------
    // Collections Fetch
    //--------------------------------------------------------------------------------
    
    this.collections.arrays.fetch({reset: true});



   // if(!this.login.loggedIn()) {
    //  this.modalView = new ModalDialogView();
    //  $('.container-fluid').first().append(this.modalView.el);
    //  this.modalView.show({
    //    message: "INSERT WARRANTY HERE",
    //    ack: function() { console.log("Closed"); }
    //  });
   // }
   //this.listenTo(this, "login:success", this.onLogin);
   //this.listenTo(this, "login:logout", this.onLogout);
    //this.listenTo(this, "streamItemView:streamSelect", function(model) {
   //   $('#map').height(328);
     // $('#plot-row').show();
     // self.views.svgPlotControlView.setModel(model);
     // self.views.svgplot.setModel(model);
     // self.views.mapView.render();
      //self.views.mapView.setMapView(); // recenters
    //});
    //this.listenTo(this, 'SVGPlotControlView:onClickPlot', function(options) {
     // self.views.svgplot.plot(options);
   // });
   }
});
var ooi = new OOI();

$(document).ready(function() {
    $("body").tooltip({ selector: '[data-toggle=tooltip]' });
    ooi.start();
    console.log(ooi)
});
</script>
{% endblock %}
